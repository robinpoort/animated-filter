!function(t,e){"function"==typeof define&&define.amd?define([],function(){return e(t)}):"object"==typeof exports?module.exports=e(t):t.animatedFilter=e(t)}("undefined"!=typeof global?global:"undefined"!=typeof window?window:this,function(t){"use strict";var n="querySelector"in document&&"addEventListener"in t,b={list:"[data-filter-list]",filter:"[data-filter]",types:"[data-filter-types]",type:"[data-filter-type]",activeClass:"is-active",animationDuration:400,onAfterAnimate:function(){}};Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(t){var e=this;if(!document.documentElement.contains(this))return null;do{if(e.matches(t))return e;e=e.parentElement}while(null!==e);return null});var h=function(t,e,i){if("[object Object]"===Object.prototype.toString.call(t))for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.call(i,t[n],n,t);else for(var a=0,r=t.length;a<r;a++)e.call(i,t[a],a,t)},v=function(){var i={},n=!1,t=0;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(n=arguments[0],t++);for(var e=function(t){for(var e in t)t.hasOwnProperty(e)&&(n&&"[object Object]"===Object.prototype.toString.call(t[e])?i[e]=v(i[e],t[e]):i[e]=t[e])};t<arguments.length;t++){e(arguments[t])}return i};return function(t){var y,i={};return i.animateFilter=function(t,e){var i=v(y||b,e||{});if(t.target.matches(i.filter)){var n,a;t.preventDefault(),n=t.target,a=i,n.closest(a.list).getElementsByClassName(a.activeClass)[0].classList.remove(a.activeClass),n.classList.add(a.activeClass);var r=document.getElementById(t.target.closest("ul").getAttribute("data-filter-for"))||document.querySelector(i.types),o=r.querySelectorAll(i.type),s=t.target.getAttribute("data-filter"),l=r.querySelectorAll("[data-filter-type]:not(.is-hidden)"),c=[],f=[];h(o,"all"==s?function(t,e){c.push(o[e])}:function(t,e){0<=o[e].getAttribute("data-filter-type").split(",").indexOf(s)?c.push(o[e]):f.push(o[e])});for(var u=0;u<o.length;u++)o[u].hasAttribute("data-position")||o[u].setAttribute("data-position",u);h(l,function(t,e){l[e].setAttribute("data-original-top",l[e].offsetTop),l[e].setAttribute("data-original-left",l[e].offsetLeft)}),r.style.height="auto";var p=r.offsetHeight||r.clientHeight;h(c,function(t,e){c[e].style.display="block",c[e].classList.remove("is-hidden"),c[e].classList.add("is-list-item")}),h(f,function(t,e){f[e].style.display="none"});var d=r.offsetHeight||r.clientHeight;h(c.reverse(),function(t,e){r.insertBefore(c[e],r.firstChild)}),h(c,function(t,e){c[e].setAttribute("data-top",c[e].offsetTop),c[e].setAttribute("data-left",c[e].offsetLeft)}),r.style.height=p+"px",h(l,function(t,e){l[e].style.display="block"});var m=r.querySelectorAll('[data-filter-type]:not([style*="display: none"])');h(m,function(t,e){m[e].classList.add("transition"),m[e].setAttribute("data-top-current",m[e].offsetTop),m[e].setAttribute("data-left-current",m[e].offsetLeft)}),h(m,function(t,e){var i,n,a=parseInt(m[e].getAttribute("data-original-top"),10),r=parseInt(m[e].getAttribute("data-top"),10)||0,o=parseInt(m[e].getAttribute("data-top-current"),10)||!1,s=parseInt(m[e].getAttribute("data-original-left"),10),l=parseInt(m[e].getAttribute("data-left"),10)||0,c=parseInt(m[e].getAttribute("data-left-current"),10)||!1;i=isNaN(a)?r-o:a-o,n=isNaN(s)?l-c:s-c,m[e].style.top=i+"px",m[e].style.left=n+"px"}),setTimeout(function(){r.style.height=d+"px",h(m,function(t,e){m[e].classList.contains("is-list-item")?m[e].classList.remove("is-hiding"):m[e].classList.add("is-hiding")}),h(l,function(t,e){var i=-1*parseInt(l[e].style.top,10)||0,n=-1*parseInt(l[e].style.left,10)||0;l[e].classList.contains("is-list-item")&&(l[e].style.transform="translate("+n+"px, "+i+"px)")})},16),setTimeout(function(){h(o,function(t,e){o[e].classList.remove("transition"),o[e].removeAttribute("style"),o[e].removeAttribute("data-top"),o[e].removeAttribute("data-original-top"),o[e].removeAttribute("data-top-current"),o[e].removeAttribute("data-left"),o[e].removeAttribute("data-original-left"),o[e].removeAttribute("data-left-current"),o[e].classList.contains("is-list-item")?o[e].classList.remove("is-list-item"):o[e].classList.add("is-hidden")}),r.removeAttribute("style"),h(o,function(t,e){r.appendChild(o[e])}),i.onAfterAnimate()},i.animationDuration)}},i.init=function(e){n&&(y=v(b,e||{}),document.addEventListener("click",function(t){i.animateFilter(t,e)},!1))},i.init(t),i}});