!function(t,e){"function"==typeof define&&define.amd?define([],function(){return e(t)}):"object"==typeof exports?module.exports=e(t):t.animatedFilter=e(t)}("undefined"!=typeof global?global:"undefined"!=typeof window?window:this,function(t){"use strict";var n="querySelector"in document&&"addEventListener"in t,r={list:"[data-filter-list]",filter:"[data-filter]",types:"[data-filter-types]",type:"[data-filter-type]",onAfterAnimate:function(){}};Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(t){var e=this;if(!document.documentElement.contains(this))return null;do{if(e.matches(t))return e;e=e.parentElement}while(null!==e);return null});var p=function(t,e,i){if("[object Object]"===Object.prototype.toString.call(t))for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.call(i,t[n],n,t);else for(var r=0,o=t.length;r<o;r++)e.call(i,t[r],r,t)},o=function(){var i={},n=!1,t=0;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(n=arguments[0],t++);for(var e=function(t){for(var e in t)t.hasOwnProperty(e)&&(n&&"[object Object]"===Object.prototype.toString.call(t[e])?i[e]=o(i[e],t[e]):i[e]=t[e])};t<arguments.length;t++){e(arguments[t])}return i};return function(t){var e,i={};return i.animateFilter=function(t){var u=o(e||r,t||{});document.addEventListener("click",function(t){if(t.target.matches(u.filter)){t.preventDefault(),t.target.parentNode.parentNode.querySelector(".is-active").classList.remove("is-active"),t.target.classList.add("is-active");var i=document.getElementById(t.target.closest("ul").getAttribute("data-filter-for"))||document.querySelector(u.types),n=i.querySelectorAll(u.type),r=t.target.getAttribute("data-filter"),o=i.querySelectorAll("[data-filter-type]:not(.is-hidden)"),a=[],s=[];p(n,"all"==r?function(t,e){a.push(n[e])}:function(t,e){0<=n[e].getAttribute("data-filter-type").split(",").indexOf(r)?a.push(n[e]):s.push(n[e])});for(var e=0;e<n.length;e++)n[e].hasAttribute("data-position")||n[e].setAttribute("data-position",e);p(o,function(t,e){o[e].setAttribute("data-original-top",o[e].offsetTop),o[e].setAttribute("data-original-left",o[e].offsetLeft)}),i.style.height="auto";var l=i.offsetHeight||i.clientHeight;p(a,function(t,e){a[e].style.display="block",a[e].classList.remove("is-hidden"),a[e].classList.add("is-list-item")}),p(s,function(t,e){s[e].style.display="none"});var c=i.offsetHeight||i.clientHeight;p(a.reverse(),function(t,e){i.insertBefore(a[e],i.firstChild)}),p(a,function(t,e){a[e].setAttribute("data-top",a[e].offsetTop),a[e].setAttribute("data-left",a[e].offsetLeft)}),i.style.height=l+"px",p(o,function(t,e){o[e].style.display="block"});var f=i.querySelectorAll('[data-filter-type]:not([style*="display: none"])');p(f,function(t,e){f[e].classList.add("transition"),f[e].setAttribute("data-top-current",f[e].offsetTop),f[e].setAttribute("data-left-current",f[e].offsetLeft)}),p(f,function(t,e){var i,n,r=parseInt(f[e].getAttribute("data-original-top"),10),o=parseInt(f[e].getAttribute("data-top"),10)||0,a=parseInt(f[e].getAttribute("data-top-current"),10)||!1,s=parseInt(f[e].getAttribute("data-original-left"),10),l=parseInt(f[e].getAttribute("data-left"),10)||0,c=parseInt(f[e].getAttribute("data-left-current"),10)||!1;i=isNaN(r)?o-a:r-a,n=isNaN(s)?l-c:s-c,f[e].style.top=i+"px",f[e].style.left=n+"px"}),setTimeout(function(){i.style.height=c+"px",p(f,function(t,e){f[e].classList.contains("is-list-item")?f[e].classList.remove("is-hiding"):f[e].classList.add("is-hiding")}),p(o,function(t,e){var i=-1*parseInt(o[e].style.top,10)||0,n=-1*parseInt(o[e].style.left,10)||0;o[e].classList.contains("is-list-item")&&(o[e].style.transform="translate("+n+"px, "+i+"px)")})},16),setTimeout(function(){p(n,function(t,e){n[e].classList.remove("transition"),n[e].removeAttribute("style"),n[e].removeAttribute("data-top"),n[e].removeAttribute("data-original-top"),n[e].removeAttribute("data-top-current"),n[e].removeAttribute("data-left"),n[e].removeAttribute("data-original-left"),n[e].removeAttribute("data-left-current"),n[e].classList.contains("is-list-item")?n[e].classList.remove("is-list-item"):n[e].classList.add("is-hidden")}),i.removeAttribute("style"),p(n,function(t,e){i.appendChild(n[e])}),u.onAfterAnimate()},400)}})},i.init=function(t){n&&(e=o(r,t||{}),i.animateFilter(t))},i.init(t),i}});