!function(t,e){"function"==typeof define&&define.amd?define([],function(){return e(t)}):"object"==typeof exports?module.exports=e(t):t.animatedFilter=e(t)}("undefined"!=typeof global?global:"undefined"!=typeof window?window:this,function(t){"use strict";var n="querySelector"in document&&"addEventListener"in t,b={list:"[data-filter-list]",filter:"[data-filter]",types:"[data-filter-types]",type:"[data-filter-type]",activeClass:"is-active",animationDuration:400,onAfterAnimate:function(){}};Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(t){var e=this;if(!document.documentElement.contains(this))return null;do{if(e.matches(t))return e;e=e.parentElement}while(null!==e);return null});var v=function(t,e,i){if("[object Object]"===Object.prototype.toString.call(t))for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.call(i,t[n],n,t);else for(var a=0,r=t.length;a<r;a++)e.call(i,t[a],a,t)},g=function(){var i={},n=!1,t=0;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(n=arguments[0],t++);for(var e=function(t){for(var e in t)t.hasOwnProperty(e)&&(n&&"[object Object]"===Object.prototype.toString.call(t[e])?i[e]=g(i[e],t[e]):i[e]=t[e])};t<arguments.length;t++){e(arguments[t])}return i};return function(t){var h,i={};return i.animateFilter=function(t,e){var i=g(h||b,e||{});if(t.target.matches(i.filter)){var n,a;t.preventDefault(),n=t.target,a=i,n.closest(a.list).getElementsByClassName(a.activeClass)[0].classList.remove(a.activeClass),n.classList.add(a.activeClass);var r=document.getElementById(t.target.closest("ul").getAttribute("data-filter-for"))||document.querySelector(i.types),o=r.querySelectorAll(i.type),s=r.querySelector('[data-filter-type="none"]'),l=t.target.getAttribute("data-filter"),c=r.querySelectorAll("[data-filter-type]:not(.is-hidden)"),f=[],u=[];v(o,"all"==l?function(t,e){o[e]!==s?f.push(o[e]):u.push(o[e])}:function(t,e){0<=o[e].getAttribute("data-filter-type").split(",").indexOf(l)?f.push(o[e]):u.push(o[e])}),0===f.length&&(f.push(s),u.splice(u.indexOf(s),1),l="none");for(var p=0;p<o.length;p++)o[p].hasAttribute("data-position")||o[p].setAttribute("data-position",p);v(c,function(t,e){c[e].setAttribute("data-original-top",c[e].offsetTop),c[e].setAttribute("data-original-left",c[e].offsetLeft)}),r.style.height="auto";var d=r.offsetHeight||r.clientHeight;v(f,function(t,e){f[e].style.display="block",f[e].classList.remove("is-hidden"),f[e].classList.add("is-list-item")}),v(u,function(t,e){u[e].style.display="none"});var m=r.offsetHeight||r.clientHeight;v(f.reverse(),function(t,e){r.insertBefore(f[e],r.firstChild)}),v(f,function(t,e){f[e].setAttribute("data-top",f[e].offsetTop),f[e].setAttribute("data-left",f[e].offsetLeft)}),r.style.height=d+"px",v(c,function(t,e){c[e].style.display="block"});var y=r.querySelectorAll('[data-filter-type]:not([style*="display: none"])');v(y,function(t,e){y[e].classList.add("transition"),y[e].setAttribute("data-top-current",y[e].offsetTop),y[e].setAttribute("data-left-current",y[e].offsetLeft)}),v(y,function(t,e){var i,n,a=parseInt(y[e].getAttribute("data-original-top"),10),r=parseInt(y[e].getAttribute("data-top"),10)||0,o=parseInt(y[e].getAttribute("data-top-current"),10)||!1,s=parseInt(y[e].getAttribute("data-original-left"),10),l=parseInt(y[e].getAttribute("data-left"),10)||0,c=parseInt(y[e].getAttribute("data-left-current"),10)||!1;i=isNaN(a)?r-o:a-o,n=isNaN(s)?l-c:s-c,y[e].style.top=i+"px",y[e].style.left=n+"px"}),setTimeout(function(){r.style.height=m+"px",v(y,function(t,e){y[e].classList.contains("is-list-item")?y[e].classList.remove("is-hiding"):y[e].classList.add("is-hiding")}),v(c,function(t,e){var i=-1*parseInt(c[e].style.top,10)||0,n=-1*parseInt(c[e].style.left,10)||0;c[e].classList.contains("is-list-item")&&(c[e].style.transform="translate("+n+"px, "+i+"px)")})},16),setTimeout(function(){v(o,function(t,e){o[e].classList.remove("transition"),o[e].removeAttribute("style"),o[e].removeAttribute("data-top"),o[e].removeAttribute("data-original-top"),o[e].removeAttribute("data-top-current"),o[e].removeAttribute("data-left"),o[e].removeAttribute("data-original-left"),o[e].removeAttribute("data-left-current"),o[e].classList.contains("is-list-item")?o[e].classList.remove("is-list-item"):o[e].classList.add("is-hidden")}),r.removeAttribute("style"),v(o,function(t,e){r.appendChild(o[e])}),i.onAfterAnimate()},i.animationDuration)}},i.init=function(e){n&&(h=g(b,e||{}),document.addEventListener("click",function(t){i.animateFilter(t,e)},!1))},i.init(t),i}});