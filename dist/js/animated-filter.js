!function(t,e){"function"==typeof define&&define.amd?define([],function(){return e(t)}):"object"==typeof exports?module.exports=e(t):t.animatedFilter=e(t)}("undefined"!=typeof global?global:"undefined"!=typeof window?window:this,function(t){"use strict";var a="querySelector"in document&&"addEventListener"in t,g={list:"[data-filter-list]",filter:"[data-filter]",types:"[data-filter-types]",type:"[data-filter-type]",activeClass:"is-active",animationDuration:400,onAfterAnimate:function(){}};Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(t){var e=this;if(!document.documentElement.contains(this))return null;do{if(e.matches(t))return e;e=e.parentElement}while(null!==e);return null});var v=function(t,e,i){if("[object Object]"===Object.prototype.toString.call(t))for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&e.call(i,t[a],a,t);else for(var n=0,r=t.length;n<r;n++)e.call(i,t[n],n,t)},A=function(){var i={},a=!1,t=0;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(a=arguments[0],t++);for(var e=function(t){for(var e in t)t.hasOwnProperty(e)&&(a&&"[object Object]"===Object.prototype.toString.call(t[e])?i[e]=A(i[e],t[e]):i[e]=t[e])};t<arguments.length;t++){e(arguments[t])}return i};return function(t){var h,i={};return i.animateFilter=function(t,e){var i=A(h||g,e||{});if(t.target.matches(i.filter)){var a,n;t.preventDefault(),a=t.target,n=i,a.closest(n.list).getElementsByClassName(n.activeClass)[0].classList.remove(n.activeClass),a.classList.add(n.activeClass);var r=document.getElementById(t.target.closest("ul").getAttribute("data-filter-for"))||document.querySelector(i.types),o=r.querySelectorAll(i.type),s=r.querySelector('[data-filter-type="none"]'),l=t.target.getAttribute("data-filter"),c=r.querySelectorAll("[data-filter-type]:not(.is-hidden)"),u=[],f=[];if(o[0].hasAttribute("data-position")){var p=[].slice.call(o);p.sort(function(t,e){return parseInt(t.getAttribute("data-position"),10)==parseInt(e.getAttribute("data-position"),10)?0:parseInt(t.getAttribute("data-position"),10)>parseInt(e.getAttribute("data-position"),10)?1:-1});for(var d=0;d<p.length;++d)r.appendChild(p[d]);o=p}for(v(o,"all"==l?function(t,e){o[e]!==s?u.push(o[e]):f.push(o[e])}:function(t,e){0<=o[e].getAttribute("data-filter-type").split(",").indexOf(l)?u.push(o[e]):f.push(o[e])}),0===u.length&&(u.push(s),f.splice(f.indexOf(s),1),l="none"),d=0;d<o.length;d++)o[d].hasAttribute("data-position")||o[d].setAttribute("data-position",d);v(c,function(t,e){c[e].setAttribute("data-original-top",c[e].offsetTop),c[e].setAttribute("data-original-left",c[e].offsetLeft)}),r.style.height="auto";var m=r.offsetHeight||r.clientHeight;v(u,function(t,e){u[e].style.display="block",u[e].classList.remove("is-hidden"),u[e].classList.add("is-list-item")}),v(f,function(t,e){f[e].style.display="none"});var y=r.offsetHeight||r.clientHeight;v(u.reverse(),function(t,e){r.insertBefore(u[e],r.firstChild)}),v(u,function(t,e){u[e].setAttribute("data-top",u[e].offsetTop),u[e].setAttribute("data-left",u[e].offsetLeft)}),r.style.height=m+"px",v(c,function(t,e){c[e].style.display="block"});var b=r.querySelectorAll('[data-filter-type]:not([style*="display: none"])');v(b,function(t,e){b[e].classList.add("transition"),b[e].setAttribute("data-top-current",b[e].offsetTop),b[e].setAttribute("data-left-current",b[e].offsetLeft)}),v(b,function(t,e){var i,a,n=parseInt(b[e].getAttribute("data-original-top"),10),r=parseInt(b[e].getAttribute("data-top"),10)||0,o=parseInt(b[e].getAttribute("data-top-current"),10)||!1,s=parseInt(b[e].getAttribute("data-original-left"),10),l=parseInt(b[e].getAttribute("data-left"),10)||0,c=parseInt(b[e].getAttribute("data-left-current"),10)||!1;i=isNaN(n)?r-o:n-o,a=isNaN(s)?l-c:s-c,b[e].style.top=i+"px",b[e].style.left=a+"px"}),setTimeout(function(){r.style.height=y+"px",v(b,function(t,e){b[e].classList.contains("is-list-item")?b[e].classList.remove("is-hiding"):b[e].classList.add("is-hiding")}),v(c,function(t,e){var i=-1*parseInt(c[e].style.top,10)||0,a=-1*parseInt(c[e].style.left,10)||0;c[e].classList.contains("is-list-item")&&(c[e].style.transform="translate("+a+"px, "+i+"px)")})},16),setTimeout(function(){v(o,function(t,e){o[e].classList.remove("transition"),o[e].removeAttribute("style"),o[e].removeAttribute("data-top"),o[e].removeAttribute("data-original-top"),o[e].removeAttribute("data-top-current"),o[e].removeAttribute("data-left"),o[e].removeAttribute("data-original-left"),o[e].removeAttribute("data-left-current"),o[e].classList.contains("is-list-item")?o[e].classList.remove("is-list-item"):o[e].classList.add("is-hidden")}),r.removeAttribute("style"),i.onAfterAnimate()},i.animationDuration)}},i.init=function(e){a&&(h=A(g,e||{}),document.addEventListener("click",function(t){i.animateFilter(t,e)},!1))},i.init(t),i}});